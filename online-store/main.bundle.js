!function(){"use strict";const e=[{id:1,brand:"Lenovo",productLine:"Legion 5",model:"15ACH6H 82JU00A1PB",cpu:"Amd",quantity:3,year:2021,img:"https://content2.onliner.by/catalog/device/header/1621bd1108d5936e156e92d3b74a640f.jpeg",popular:!0,basket:!1},{id:2,brand:"Lenovo",productLine:"Legion 5",model:"16ACH6H 82JQ000PRK",cpu:"Amd",quantity:5,year:2022,img:"https://content2.onliner.by/catalog/device/header/80e1ddd0f7197088326b8c597de6927a.jpeg",popular:!0,basket:!1},{id:3,brand:"Lenovo",productLine:"Legion 7",model:"16ACHg6 82N6000GRK",cpu:"Amd",quantity:2,year:2022,img:"https://content2.onliner.by/catalog/device/header/4bfdd7966add8e8381383fd59f22e1f4.jpeg",popular:!1,basket:!1},{id:4,brand:"Lenovo",productLine:"Legion 7",model:"17ACH6H 82JY0054PB",cpu:"Intel",quantity:1,year:2021,img:"https://content2.onliner.by/catalog/device/header/3bebdcb0b8f2b9c9ebc4353917a5564d.jpeg",popular:!1,basket:!1},{id:5,brand:"Lenovo",productLine:"IdeaPad",model:"15ACH6 82K200HERE",cpu:"Intel",quantity:6,year:2021,img:"https://content2.onliner.by/catalog/device/header/d477b48356f04e5c519203bcdf6a3dff.jpeg",popular:!0,basket:!1},{id:6,brand:"Lenovo",productLine:"IdeaPad",model:"15IHU6 82K1007JRE",cpu:"Intel",quantity:7,year:2022,img:"https://content2.onliner.by/catalog/device/header/ea3aec227c734948079215e15ce1c5bb.jpeg",popular:!1,basket:!1},{id:7,brand:"Lenovo",productLine:"IdeaPad",model:"14ACN6 82L7000PRK",cpu:"Amd",quantity:5,year:2022,img:"https://content2.onliner.by/catalog/device/header/b81a94df4eb6fe69c354399f49377452.jpeg",popular:!1,basket:!1},{id:8,brand:"Lenovo",productLine:"IdeaPad",model:"14ITL6 82L3006HRE",cpu:"Intel",quantity:4,year:2021,img:"https://content2.onliner.by/catalog/device/header/dd9c649259133cae2c9b5e35a4228b29.jpeg",popular:!1,basket:!1},{id:9,brand:"Lenovo",productLine:"IdeaPad",model:"16IHU6 82L9002RRK",cpu:"Amd",quantity:2,year:2022,img:"https://content2.onliner.by/catalog/device/header/04d6c56a2759c1ed9d2a72dea47ac009.jpeg",popular:!1,basket:!1},{id:10,brand:"Lenovo",productLine:"IdeaPad",model:"14ITL6 82L3002CRK",cpu:"Amd",quantity:6,year:2022,img:"https://content2.onliner.by/catalog/device/header/dd9c649259133cae2c9b5e35a4228b29.jpeg",popular:!0,basket:!1},{id:11,brand:"Lenovo",productLine:"Legion 5",model:"15ACH6H 82JU00A1PB",cpu:"Amd",quantity:3,year:2022,img:"https://content2.onliner.by/catalog/device/header/1621bd1108d5936e156e92d3b74a640f.jpeg",popular:!0,basket:!1},{id:12,brand:"Lenovo",productLine:"IdeaPad",model:"15ITL6 82HL008YRU",cpu:"Intel",quantity:3,year:2021,img:"https://content2.onliner.by/catalog/device/header/99bb2c9b34075eca99f3021218dcb9c4.jpeg",popular:!1,basket:!1},{id:13,brand:"Lenovo",productLine:"ThinkBook",model:"15 G3 ACL 21A40034RU",cpu:"Amd",quantity:2,year:2021,img:"https://content2.onliner.by/catalog/device/header/9d0886d3b43a1314049b0ab26d8dd1b7.jpeg",popular:!1,basket:!1},{id:14,brand:"Lenovo",productLine:"ThinkBook",model:"16p G2 ACH 20YM000",cpu:"Amd",quantity:5,year:2022,img:"https://content2.onliner.by/catalog/device/header/bbacbe408ea2f636e132709429bb0213.jpeg",popular:!0,basket:!1},{id:15,brand:"Lenovo",productLine:"ThinkBook",model:"14 G3 ACL 21A2003TRU",cpu:"Intel",quantity:4,year:2021,img:"https://content2.onliner.by/catalog/device/header/2c4423bbc73e506a0c7eadab3464981e.jpeg",popular:!1,basket:!1},{id:16,brand:"Lenovo",productLine:"ThinkPad",model:"E14 Gen 3 AMD 20Y7003SRT",cpu:"Intel",quantity:8,year:2021,img:"https://content2.onliner.by/catalog/device/header/3dd7e4c823eb8056b3e98c252310fcba.jpeg",popular:!1,basket:!1},{id:17,brand:"Lenovo",productLine:"ThinkPad",model:"X1 Titanium Yoga Gen 1",cpu:"Intel",quantity:2,year:2022,img:"https://content2.onliner.by/catalog/device/header/8bc40e8c3ca9b676ba9fad033782fe5e.jpeg",popular:!1,basket:!1},{id:18,brand:"Lenovo",productLine:"ThinkPad",model:"L13 Gen 2 Intel 20VH001ERT",cpu:"Amd",quantity:7,year:2021,img:"https://content2.onliner.by/catalog/device/header/4e82e8c27d35ccf5c39b85699c10f3ee.jpeg",popular:!1,basket:!1},{id:19,brand:"Lenovo",productLine:"ThinkPad",model:"T14 Gen 2 AMD 20XL0013RT",cpu:"Amd",quantity:3,year:2021,img:"https://content2.onliner.by/catalog/device/header/5ddbc5844b73dd0e1fe4b2622c69b92b.jpeg",popular:!1,basket:!1},{id:20,brand:"Lenovo",productLine:"ThinkPad",model:"X1 Carbon Gen 9 20XXS4",cpu:"Intel",quantity:8,year:2022,img:"https://content2.onliner.by/catalog/device/header/baf036495a8293595615d59379f6fb57.jpeg",popular:!0,basket:!1},{id:21,brand:"Lenovo",productLine:"ThinkBook",model:"L13 Gen 2 AMD 21AB0010RT",cpu:"Amd",quantity:2,year:2022,img:"https://content2.onliner.by/catalog/device/header/1be34ed4ac17a881e2403cf8ef57bc15.jpeg",popular:!1,basket:!1},{id:22,brand:"Lenovo",productLine:"Yoga",model:"14ITL05 82A3009VRE",cpu:"Amd",quantity:10,year:2022,img:"https://content2.onliner.by/catalog/device/header/7291658923d7090bbfbd179e2e0bf9da.jpeg",popular:!1,basket:!1},{id:23,brand:"Lenovo",productLine:"Yoga",model:"Carbon 14ACN6 82L0005",cpu:"Intel",quantity:8,year:2022,img:"https://content2.onliner.by/catalog/device/header/f118003a4b0476c5dc89708c15093a19.jpeg",popular:!0,basket:!1},{id:24,brand:"Lenovo",productLine:"Yoga",model:"13ACN5 82CY002QRU",cpu:"Intel",quantity:3,year:2021,img:"https://content2.onliner.by/catalog/device/header/83c9855bc131820e979d1ff8753d64b4.jpeg",popular:!1,basket:!1},{id:25,brand:"Lenovo",productLine:"Yoga",model:"14ITL05 82A3009VRE",cpu:"Amd",quantity:10,year:2022,img:"https://content2.onliner.by/catalog/device/header/7291658923d7090bbfbd179e2e0bf9da.jpeg",popular:!1,basket:!1},{id:26,brand:"Lenovo",productLine:"Yoga",model:"14IAP7 82LU001LUS",cpu:"Amd",quantity:4,year:2021,img:"https://content2.onliner.by/catalog/device/header/88ea3ce400ff377e494cb42a10818434.jpeg",popular:!1,basket:!1},{id:27,brand:"Lenovo",productLine:"Yoga",model:"14ACN6 82N7008LRU",cpu:"Intel",quantity:7,year:2022,img:"https://content2.onliner.by/catalog/device/header/3d5a7f5422e4932c075b7d7b37d3c864.jpeg",popular:!0,basket:!1},{id:28,brand:"Lenovo",productLine:"Yoga",model:"13ALC6 82ND00DDRU",cpu:"Amd",quantity:5,year:2022,img:"https://content2.onliner.by/catalog/device/header/05e5e731ac69342a98885dc841faff6e.jpeg",popular:!0,basket:!1},{id:29,brand:"Lenovo",productLine:"Yoga",model:"Carbon 13ITL5 82EV006",cpu:"Intel",quantity:6,year:2022,img:"https://content2.onliner.by/catalog/device/header/2369c4878b782504f910447114c49a22.jpeg",popular:!0,basket:!1}];var t,a;!function(e){e.LC_PREFIX="lenovo_storage_"}(t||(t={}));class n{static getBasket(){const e=localStorage.getItem(t.LC_PREFIX+"basket");return e?JSON.parse(e):[]}static getCpu(){const e=localStorage.getItem(t.LC_PREFIX+"cpu");return e?JSON.parse(e):[]}static getPopular(){return"true"===localStorage.getItem(t.LC_PREFIX+"popular")}static saveToLocalStorage(e){Object.entries(e).forEach((e=>{const[a,n]=e;let o;o="object"==typeof n?JSON.stringify([...n]):JSON.stringify(n),localStorage.setItem(t.LC_PREFIX+a,o),alert(n)}))}}class o{static getValueFilters(e){const t=document.createElement("div");t.classList.add("filters"),t.addEventListener("click",(t=>{o.handleValueFilters(t,e)}));const a=document.createElement("h2");a.textContent="Filters by value",t.append(a);const n=o.getCpuFilter(),r=o.getPopularFilter();return r.addEventListener("click",(t=>{o.handleClickCheckbox(t,e)})),t.append(n,r),t}static handleValueFilters(e,t){const a=e.target,n=a.textContent;!n||"Amd"!==n&&"Intel"!==n||(a.classList.toggle("filters-active"),t({cpuFilter:n}))}static getCpuFilter(){const e=n.getCpu(),t=document.createElement("div");t.classList.add("filters__cpu-filter");const a=document.createElement("h3");a.textContent="CPU filter:",t.append(a);const o=document.createElement("ul");return["Amd","Intel"].forEach((t=>{const a=document.createElement("li");a.textContent=t,e.includes(t)&&a.classList.add("filters-active"),o.append(a)})),t.append(o),t}static getPopularFilter(){const e=document.createElement("div");e.classList.add("filters__popular");const t=document.createElement("label"),a=document.createElement("input");return a.type="checkbox",n.getPopular()&&(a.checked=!0),t.textContent="Popular",t.insertAdjacentElement("afterbegin",a),e.append(t),e}static handleClickCheckbox(e,t){t({popular:e.target.checked})}}function r(e,t=document){const a=t.querySelector(e);if(!a)throw new Error(`Selector '${e}' didn't match any elements.`);return a}!function(e){e.RESETFILTERS="Reset filters",e.RESETSETTINGS="Reset settings"}(a||(a={}));class d{static getButtons(e){const t=document.createElement("div");t.classList.add("reset-buttons"),t.addEventListener("click",(t=>{d.handleResetButtons(t,e)}));const n=document.createElement("button");n.classList.add("reset-filters"),n.textContent=a.RESETFILTERS;const o=document.createElement("button");return o.classList.add("reset-settings"),o.textContent=a.RESETSETTINGS,t.append(n,o),t}static handleResetButtons(e,t){t(e.target.textContent===a.RESETFILTERS)}}class s{static getSearch(e){const t=document.createElement("input");t.type="search",t.classList.add("search-input"),t.autofocus=!0,t.placeholder="search...",t.autocomplete="off";const a=document.createElement("span");a.classList.add("search-cleanup-button"),a.addEventListener("click",(a=>{s.handleSearchCleanupButton(a,t,e)}));const n=document.createElement("label");return n.classList.add("search-label"),n.append(t,a),t.addEventListener("input",(t=>{s.handleSearchInput(t,e,a)})),n}static handleSearchInput(e,t,a){const n=e.target;var o;a.style.visibility=n.value?"visible":"hidden",t({searchValue:(o=n.value,o.trim().toLowerCase())})}static handleSearchCleanupButton(e,t,a){e.target.style.visibility="hidden",t.value="",a({searchValue:""})}}class i{static modelRender(e){const t=document.createDocumentFragment();return"string"==typeof e?(t.append(e),t):(e.forEach((e=>{const a=class{static draw(e){const{id:t,brand:a,productLine:n,model:o,cpu:d,quantity:s,year:i,img:c,popular:l,basket:p}=e,u=r("#cardTemp").content.cloneNode(!0);if(u){const e=r(".card",u),b=r(".card__name",u),h=r(".card__popular",u),g=r(".card__img img",u),m=r(".laptop-brand",u),L=r(".laptop-line",u),f=r(".laptop-model",u),y=r(".laptop-cpu",u),v=r(".laptop-quantity",u),k=r(".laptop-year",u),E=r(".card__basket",u);e.dataset.id=t;const C=`${a} ${n} ${o}`;return b.textContent=C,l&&(h.style.visibility="visible"),g.setAttribute("src",c),g.setAttribute("alt",C),m.innerHTML=`<span class="bold">Brand:</span> ${a}`,L.innerHTML=`<span class="bold">Line:</span> ${n}`,f.innerHTML=`<span class="bold">Model:</span> ${o}`,y.innerHTML=`<span class="bold">CPU:</span> ${d}`,v.innerHTML=`<span class="bold">Quantity:</span> ${s}`,k.innerHTML=`<span class="bold">Year:</span> ${i}`,E.textContent=p?"Remove from cart":"Add to cart",e.dataset.basket=p,u}}}.draw(e);a&&t.append(a)})),t)}static searchRender(e){return s.getSearch(e)}static valueFiltersRender(e){return o.getValueFilters(e)}static resetButtons(e){return d.getButtons(e)}}class c{static getModel(e){const{model:t,filters:a}=e;let n=c.searchFilter(t,a);return n&&(n=c.valueFilter(n,a),n=c.popularFilter(n,a)),console.log(n),n}static searchFilter(e,t){if(!t.search.length)return e;let a=[];return"object"==typeof e&&(a=e.filter((({brand:e,productLine:a,model:n})=>{const o=`${e} ${a} ${n}`;return new RegExp(t.search,"i").test(o)}))),a.length?a:[]}static valueFilter(e,t){if(!t.cpu.size)return e;let a="";return"object"==typeof e&&(a=e.filter((({cpu:e})=>t.cpu.has(e)))),a}static popularFilter(e,t){if(!t.popular)return e;let a="";return"object"==typeof e&&(a=e.filter((({popular:e})=>e===t.popular))),a}}class l{static getModal(e,t){const a=r("#modal-window").content.cloneNode(!0);r(".modal__message",a).textContent=e;const n=r(".modal__button-close",a);return n.textContent="Закрыть окно",n.addEventListener("click",(e=>{l.handleModalWindow(e,t)})),a}static handleModalWindow(e,t){e.target.closest(".modal").style.top="-15%";const a=r(".modal"),n=r(".modal__back-layer");setTimeout((()=>{a.remove(),n.remove(),t.removeAttribute("disabled")}),500)}}(new class{constructor(){this.state={filtersDOM:r(".main__filters"),cardsDOM:r(".main__cards"),model:[...e],filteredModel:[],basket:new Set(n.getBasket()),basketQuantity:r(".basket__quantity"),filters:{search:"",cpu:new Set(n.getCpu()),popular:n.getPopular()}}}handleCards(e){const t=e.target;if(t.classList.contains("card__basket")){const{basket:e,model:a}=this.state,n=t.closest(".card"),o=Number(n.dataset.id);if(e.has(o))e.delete(o);else{if(20===e.size){t.setAttribute("disabled","true");const e=l.getModal("Извините, все слоты заполнены!",t);r("body").append(e);const a=r(".modal");return void setTimeout((()=>{a.style.top="50%"}),0)}e.add(o)}for(const e of a)if(e.id===o){e.basket=!e.basket;break}this.render(!0)}}prepareModel(){const{basket:e,filters:{cpu:t}}=this.state;e.size&&(this.state.model=this.state.model.map((t=>(e.has(t.id)&&(t.basket=!0),t)))),this.filtersCallback({cpuFilter:t}),this.state.filteredModel=[...this.state.model]}init(){const{basket:e,filters:{cpu:t}}=this.state;this.prepareModel(),this.render(!0),this.renderFilters(),this.state.cardsDOM.addEventListener("click",(e=>this.handleCards(e))),window.addEventListener("beforeunload",(()=>{const a=this.state.filters.popular;n.saveToLocalStorage({basket:e,cpu:t,popular:a})}))}render(e=!1){console.log(this.state);const{cardsDOM:t,filteredModel:a}=this.state,n=i.modelRender(a);t.innerHTML="",t.append(n),console.log(n),e&&this.renderBasket()}renderBasket(){const{basket:e,basketQuantity:t}=this.state;t.innerHTML=String(e.size?e.size:0)}renderFilters(){this.state.filtersDOM.innerHTML="",[i.searchRender(this.filtersCallback.bind(this)),i.valueFiltersRender(this.filtersCallback.bind(this)),i.resetButtons(this.resetButtonsCallback.bind(this))].forEach((e=>{this.state.filtersDOM.insertAdjacentElement("beforeend",e)}))}filtersCallback(a){const{searchValue:n,cpuFilter:o,popular:r}=a;if(r?(this.state.filters.popular=r,this.state.model=this.state.model.filter((e=>e.popular===r))):!1===r&&(this.state.filters.popular=r,localStorage.setItem(t.LC_PREFIX+"popular",String(r)),this.state.model=[...e]),"object"==typeof o&&o.size&&(this.state.model=this.state.model.filter((e=>o.has(e.cpu)))),"string"==typeof o){const t=this.state.filters.cpu;t.has(o)?(t.delete(o),t.size||(this.state.model=[...e])):t.add(o)}void 0!==n&&(this.state.filters.search=n),this.state.filteredModel=c.getModel(this.state).length?c.getModel(this.state):"Извините, совпадений не обнаружено!",this.render()}resetButtonsCallback(a){localStorage.removeItem(t.LC_PREFIX+"cpu"),this.state.filters.search="",this.state.filters.cpu.size&&this.state.filters.cpu.forEach((e=>{this.state.filters.cpu.delete(e)})),a||(localStorage.clear(),this.state.basket.size&&this.state.basket.forEach((e=>{this.state.basket.delete(e)})),this.renderBasket()),e.map((e=>(e.basket=!1,e))),this.state.model=this.state.filteredModel=[...e],this.filtersCallback({}),this.renderFilters()}}).init()}();
//# sourceMappingURL=main.bundle.js.map